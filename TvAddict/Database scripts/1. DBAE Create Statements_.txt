CREATE TABLE serie
(
  serie_id SERIAL,
  serie_name varchar(40) NOT NULL,
  beschreibung varchar(200) NOT NULL,
  fsk int2 NOT NULL,
  genre1 varchar(30) NOT NULL,
  genre2 varchar(30),
  genre3 varchar(30),
  sendetag text NOT NULL,
  CONSTRAINT serie_pkey PRIMARY KEY (serie_id)
) 
WITHOUT OIDS;

CREATE TABLE bewertungen
(
  serie_id int2 NOT NULL REFERENCES serie(serie_id),
  bewertung numeric(3,1),
  anzahl_1 int2,
  anzahl_2 int2,
  anzahl_3 int2,
  anzahl_4 int2,
  anzahl_5 int2,
  anzahl_6 int2,
  anzahl_7 int2,
  anzahl_8 int2,
  anzahl_9 int2,
  anzahl_10 int2,
  CONSTRAINT f_key FOREIGN KEY (serie_id)
    REFERENCES serie (serie_id) MATCH SIMPLE
    ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT gueltige_bewertung CHECK ((bewertung >= 0.0) AND (bewertung <= 10.0))
) 
WITHOUT OIDS;


CREATE TABLE schauspieler
(
  person_id SERIAL,
  name varchar(30) NOT NULL,
  serie_id int2 NOT NULL,
  CONSTRAINT person_pkey PRIMARY KEY (person_id),
  CONSTRAINT f_key FOREIGN KEY (serie_id)
    REFERENCES serie (serie_id) MATCH SIMPLE
    ON UPDATE NO ACTION ON DELETE NO ACTION
) 
WITHOUT OIDS;



CREATE TABLE benutzer
(
  user_id SERIAL CONSTRAINT benutzer_eindeutig UNIQUE,
  mitarbeiter boolean NOT NULL,
  user_name varchar (30) UNIQUE NOT NULL,
  v_name varchar(30) NOT NULL,
  n_name varchar(30) NOT NULL,
  email text UNIQUE NOT NULL,
  passwort varchar(30) NOT NULL,
  CONSTRAINT user_pkey PRIMARY KEY (user_id, user_name)
) 
WITHOUT OIDS;


CREATE TABLE favorites
(
  user_id int2 NOT NULL REFERENCES benutzer(user_id),
  serie_id int2 NOT NULL REFERENCES serie(serie_id)
)
WITHOUT OIDS;


CREATE TABLE comments
(
  comment_id SERIAL,
  user_id int2 NOT NULL REFERENCES benutzer(user_id),
  serie_id int2 NOT NULL REFERENCES serie(serie_id),
  comment_text text NOT NULL,
  CONSTRAINT comment_pkey PRIMARY KEY (comment_id)
) 
WITHOUT OIDS;





//Nicht reinkopieren
CREATE TABLE benutzer
(
  user_id SERIAL,
  mitarbeiter boolean NOT NULL,
  user_name varchar (30) NOT NULL,
  v_name varchar(30) NOT NULL,
  n_name varchar(30) NOT NULL,
  email text NOT NULL,
  passwort varchar(30) NOT NULL,
  CONSTRAINT user_pkey PRIMARY KEY (user_id, user_name),
  CONSTRAINT f_key FOREIGN KEY (serie_id)
    REFERENCES serie (serie_id) MATCH SIMPLE
    ON UPDATE NO ACTION ON DELETE NO ACTION
) 
WITHOUT OIDS;